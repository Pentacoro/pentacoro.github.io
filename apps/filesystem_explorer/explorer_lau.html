<script>
    let arg = []
    //[0] directory name
    let url = "./apps/filesystem_explorer/explorer.html"

    //on app init
    function ini() {

    }
    //on app end
    function end() {

    }
    //task creation
    if (canInstance("Explorer")) {
        taskArray.push(new Task("Explorer", true, end))
        let task = taskArray[taskArray.length - 1]
        let id = task.id

        //get the .html
        let appHTML = ajaxReturn("get", url)
        appHTML.then( data => {
            //window generation
            windowArray.push(new Window(arg[0], id, true, 3, 1, 200, 200, 700, 460, 192, 160))
            newWindow = windowArray[windowArray.length - 1]
            newWindow.createNode()

            //X button
            document.getElementsByClassName("ID_"+id)[0].children[0].children[0].children[3].addEventListener("mouseup", task.end)

            ini()

            data = repDir(data,url)
            data = repTid(data,id)
            data = data.replace(/xcorex/g,arg[1])

            loadURL(repDir(data,url), document.getElementById("windowNumber" + windowArray.indexOf(newWindow)).children[0].children[1])
        })
        appHTML.catch( err => {
            console.log(err)
        })
    } else {
        console.log("instanced")
    }
</script>