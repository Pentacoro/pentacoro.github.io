<script>
    let arg = []
    let url = "./apps/settings_deskGrid/deskGridOptions.html"

    //on app init
    function ini() {
        cfg.desk.grid.visibleNodes = true
        evaluateIconGrid(null, 2)
    }
    //on app end
    function end() {
        cfg.desk.grid.visibleNodes = false
        evaluateIconGrid(null, 2)
    }
    //task creation
    if (canInstance("Desk Grid Settings")) {
        sys.taskArr.push(new Task("Desk Grid Settings", false, end))
        let task = sys.taskArr[sys.taskArr.length - 1]
        let id = task.id

        //get the .html
        let appHTML = ajaxReturn("get", url)
        appHTML.then( data => {
            //window generation
            sys.wndwArr.push(new Window("Desktop Grid Settings", id, false, 1, 1, 350, 560))
            newWindow = sys.wndwArr[sys.wndwArr.length - 1]
            newWindow.createNode()

            //X button
            document.getElementsByClassName("ID_"+id)[0].children[0].children[0].children[1].addEventListener("mouseup", task.end)

            ini()

            loadURL(repDir(data,url), document.getElementById("windowNumber" + sys.wndwArr.indexOf(newWindow)).children[0].children[1])
        })
        appHTML.catch( err => {
            console.log(err)
        })
    } else {
        console.log("instanced")
    }
</script>